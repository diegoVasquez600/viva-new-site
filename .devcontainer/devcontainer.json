// For format details, see https://aka.ms/devcontainer.json. For config options, see the README at:
// https://github.com/microsoft/vscode-dev-containers/tree/v0.245.0/containers/docker-from-docker
{
	"name": "Drupal DevEnvironment",
	"dockerFile": "drupal:latest",
	"runArgs": [
		"--name ccviva-drupal -p 8080:80 -d drupal"
	],
	"mounts": [
		"source=/var/run/docker.sock,target=/var/run/docker-host.sock,type=bind"
	],
	"overrideCommand": false,
	// Use this environment variable if you need to bind mount your local source code into a new container.
	"remoteEnv": {
		"LOCAL_WORKSPACE_FOLDER": "${localWorkspaceFolder}"
	},
	"settings": {
		"php": {
			// Allow Xdebug to listen to requests from remote (or container)
			"remote.localPortHost": "allInterfaces",
		},
		// Configure tool-specific properties.
		"customizations": {
			// Configure properties specific to VS Code.
			"vscode": {
				// Add the IDs of extensions you want installed when the container is created.
				"extensions": [
					"xdebug.php-debug",
					"bmewburn.vscode-intelephense-client",
					"mrmlnc.vscode-apache",
					"whatwedo.twig",
					"ikappas.composer",
					"dmitrydorofeev.empty-indent",
					"42crunch.vscode-openapi",
					"neilbrayfield.php-docblocker",
					"persoderlind.vscode-phpcbf",
					"shevaua.phpcs",
					"humao.rest-client",
					"irongeek.vscode-env",
					"calebporzio.better-phpunit"
				]
			}
		},
		"forwardPorts": [],
		"appPort": [
			"80:80",
			"443:443"
		],
		// Use 'forwardPorts' to make a list of ports inside the container available locally.
		// "forwardPorts": [],
		// Use 'postCreateCommand' to run commands after the container is created.
		// "postCreateCommand": "docker --version",
		// Comment out to connect as root instead. More info: https://aka.ms/vscode-remote/containers/non-root.
		"remoteUser": "vscode",
		"build": {
			"args": {
				"UPGRADE_PACKAGES": "true"
			}
		},
		"features": {
			"git": "latest"
		}
	}
}